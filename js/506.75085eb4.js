"use strict";(self["webpackChunkvue_shop"]=self["webpackChunkvue_shop"]||[]).push([[506],{6827:function(t,a,e){e.d(a,{Z:function(){return u}});var r=function(){var t=this,a=t._self._c;return a("ul",{staticClass:"cart__orders"},t._l(t.items,(function(e){return a("li",{key:e.productId,staticClass:"cart__order"},[a("h3",[t._v(t._s(e.product.title))]),a("b",[t._v(t._s(t._f("numberFormat")(e.product.price))+" ₽")]),a("span",[t._v("Артикул: "+t._s(e.productId))])])})),0)},s=[],o=e(5363),l={name:"OrderList",props:["items"],filters:{numberFormat:o.Z}},i=l,n=e(1001),c=(0,n.Z)(i,r,s,!1,null,null,null),u=c.exports},1506:function(t,a,e){e.r(a),e.d(a,{default:function(){return $}});var r=function(){var t=this,a=t._self._c;return a("main",{staticClass:"content container"},[t._m(0),a("section",{staticClass:"cart"},[a("form",{staticClass:"cart__form form",attrs:{action:"#",method:"POST"},on:{submit:function(a){return a.preventDefault(),t.order.apply(null,arguments)}}},[t.formLoading?a("div",{staticClass:"cart__field"},[t._v("Отправка заказа...")]):a("div",{staticClass:"cart__field"},[a("div",{staticClass:"cart__data"},[a("BaseFormText",{attrs:{title:"ФИО",error:t.formError.name,placeholder:"Введите ваше полное имя"},model:{value:t.formData.name,callback:function(a){t.$set(t.formData,"name",a)},expression:"formData.name"}}),a("BaseFormText",{attrs:{title:"Адрес доставки",error:t.formError.address,placeholder:"Введите ваш адрес"},model:{value:t.formData.address,callback:function(a){t.$set(t.formData,"address",a)},expression:"formData.address"}}),a("BaseFormText",{attrs:{title:"Телефон",error:t.formError.phone,placeholder:"Введите ваш телефон",type:"tel"},model:{value:t.formData.phone,callback:function(a){t.$set(t.formData,"phone",a)},expression:"formData.phone"}}),a("BaseFormText",{attrs:{title:"Email",error:t.formError.email,placeholder:"Введите ваш Email",type:"email"},model:{value:t.formData.email,callback:function(a){t.$set(t.formData,"email",a)},expression:"formData.email"}}),a("BaseFormTextarea",{attrs:{title:"Комментарий к заказу",error:t.formError.comment,placeholder:"Ваши пожелания"},model:{value:t.formData.comment,callback:function(a){t.$set(t.formData,"comment",a)},expression:"formData.comment"}})],1),t._m(1)]),a("div",{staticClass:"cart__block"},[a("OrderList",{attrs:{items:t.products}}),a("div",{staticClass:"cart__total"},[t._m(2),a("p",[t._v(" Итого: товаров "),a("b",[t._v(t._s(t.productsAmount))]),t._v(" на сумму "),a("b",[t._v(t._s(t._f("numberFormat")(t.totalPrice))+" ₽")])])]),a("button",{staticClass:"cart__button button button--primery",attrs:{type:"submit"}},[t._v(" Оформить заказ ")])],1),t.formErrorMessage?a("div",{staticClass:"cart__error form__error-block"},[a("h4",[t._v("Заявка не отправлена!")]),a("p",[t._v(" "+t._s(t.formErrorMessage)+" ")])]):t._e()])])])},s=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"content__top"},[a("ul",{staticClass:"breadcrumbs"},[a("li",{staticClass:"breadcrumbs__item"},[a("a",{staticClass:"breadcrumbs__link",attrs:{href:"index.html"}},[t._v(" Каталог ")])]),a("li",{staticClass:"breadcrumbs__item"},[a("a",{staticClass:"breadcrumbs__link",attrs:{href:"cart.html"}},[t._v(" Корзина ")])]),a("li",{staticClass:"breadcrumbs__item"},[a("a",{staticClass:"breadcrumbs__link"},[t._v(" Оформление заказа ")])])]),a("h1",{staticClass:"content__title"},[t._v("Корзина")]),a("span",{staticClass:"content__info"},[t._v(" 3 товара ")])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"cart__options"},[a("h3",{staticClass:"cart__title"},[t._v("Доставка")]),a("ul",{staticClass:"cart__options options"},[a("li",{staticClass:"options__item"},[a("label",{staticClass:"options__label"},[a("input",{staticClass:"options__radio sr-only",attrs:{type:"radio",name:"delivery",value:"0",checked:""}}),a("span",{staticClass:"options__value"},[t._v(" Самовывоз "),a("b",[t._v("бесплатно")])])])]),a("li",{staticClass:"options__item"},[a("label",{staticClass:"options__label"},[a("input",{staticClass:"options__radio sr-only",attrs:{type:"radio",name:"delivery",value:"500"}}),a("span",{staticClass:"options__value"},[t._v(" Курьером "),a("b",[t._v("500 ₽")])])])])]),a("h3",{staticClass:"cart__title"},[t._v("Оплата")]),a("ul",{staticClass:"cart__options options"},[a("li",{staticClass:"options__item"},[a("label",{staticClass:"options__label"},[a("input",{staticClass:"options__radio sr-only",attrs:{type:"radio",name:"pay",value:"card"}}),a("span",{staticClass:"options__value"},[t._v(" Картой при получении ")])])]),a("li",{staticClass:"options__item"},[a("label",{staticClass:"options__label"},[a("input",{staticClass:"options__radio sr-only",attrs:{type:"radio",name:"pay",value:"cash"}}),a("span",{staticClass:"options__value"},[t._v(" Наличными при получении ")])])])])])},function(){var t=this,a=t._self._c;return a("p",[t._v("Доставка: "),a("b",[t._v("500 ₽")])])}],o=(e(7658),function(){var t=this,a=t._self._c;return a("BaseFormField",{attrs:{title:t.title,error:t.error}},["checkbox"===t.type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.dataValue,expression:"dataValue"}],staticClass:"form__input",attrs:{placeholder:t.placeholder,type:"checkbox"},domProps:{checked:Array.isArray(t.dataValue)?t._i(t.dataValue,null)>-1:t.dataValue},on:{change:function(a){var e=t.dataValue,r=a.target,s=!!r.checked;if(Array.isArray(e)){var o=null,l=t._i(e,o);r.checked?l<0&&(t.dataValue=e.concat([o])):l>-1&&(t.dataValue=e.slice(0,l).concat(e.slice(l+1)))}else t.dataValue=s}}}):"radio"===t.type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.dataValue,expression:"dataValue"}],staticClass:"form__input",attrs:{placeholder:t.placeholder,type:"radio"},domProps:{checked:t._q(t.dataValue,null)},on:{change:function(a){t.dataValue=null}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.dataValue,expression:"dataValue"}],staticClass:"form__input",attrs:{placeholder:t.placeholder,type:t.type},domProps:{value:t.dataValue},on:{input:function(a){a.target.composing||(t.dataValue=a.target.value)}}})])}),l=[],i=function(){var t=this,a=t._self._c;return a("label",{staticClass:"form__label"},[t._t("default"),a("span",{staticClass:"form__value"},[t._v(t._s(t.title))]),t.error?a("span",{staticClass:"form__error"},[t._v(" "+t._s(t.error)+" ")]):t._e()],2)},n=[],c={name:"BaseFormField",props:["title","error"]},u=c,m=e(1001),_=(0,m.Z)(u,i,n,!1,null,null,null),d=_.exports,p={name:"BaseFormTextarea",components:{BaseFormField:d},props:["title","error","placeholder","value"],computed:{dataValue:{get(){return this.value},set(t){this.$emit("input",t)}}}},f={props:{type:{default:"text"}},mixins:[p]},v=f,h=(0,m.Z)(v,o,l,!1,null,null,null),C=h.exports,b=function(){var t=this,a=t._self._c;return a("BaseFormField",{attrs:{title:t.title,error:t.error}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.dataValue,expression:"dataValue"}],staticClass:"form__input form__input--area",attrs:{placeholder:t.placeholder},domProps:{value:t.dataValue},on:{input:function(a){a.target.composing||(t.dataValue=a.target.value)}}})])},y=[],x={mixins:[p]},g=x,F=(0,m.Z)(g,b,y,!1,null,null,null),k=F.exports,V=e(6827),D=e(408),E=e(5363),B=e(306),P=e(54),L={name:"OrderPage",components:{BaseFormText:C,BaseFormTextarea:k,OrderList:V.Z},data(){return{formData:{},formError:{},formErrorMessage:"",formLoading:!1,formLoadingFailed:!1}},filters:{numberFormat:E.Z},computed:{...(0,D.Se)({totalPrice:"cartTotalPrice",productsAmount:"cartProductsAmount",products:"cartDetailProducts"})},methods:{order(){this.formError={},this.formErrorMessage="",this.formLoading=!0,this.formLoadingFailed=!1,B.Z.post(P.C+"/api/orders",{...this.formData},{params:{userAccessKey:this.$store.state.userAccessKey}}).then((t=>{this.$store.commit("resetCart"),this.$store.commit("updateOrderInfo",t.data),this.$router.push({name:"orderInfo",params:{id:t.data.id}})})).catch((t=>{this.formError=t.response.data.error.request||{},this.formErrorMessage=t.response.data.error.message,this.formLoadingFailed=!0})).then((()=>this.formLoading=!1))}}},T=L,Z=(0,m.Z)(T,r,s,!1,null,null,null),$=Z.exports}}]);
//# sourceMappingURL=506.75085eb4.js.map